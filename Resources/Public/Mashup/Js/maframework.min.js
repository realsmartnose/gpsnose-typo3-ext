var gnSettings={BaseUrl:"https://www.gpsnose.com",BaseDataUrl:"http://data.gpsnose.com",ImagePath:"/Content/Mashup/Images",NosesPageSize:12,NewsPageSize:12,PhotoBlogsPageSize:10,PoisPageSize:12,ToursPageSize:12,EventsPageSize:12,CommentsPageSize:12,CommunityMembersPageSize:12,NearbyNosesPageSize:100,MashupTokensPageSize:12};void 0!==window.gn_data&&void 0!==window.gn_data.Settings&&null!=window.gn_data.Settings&&jQuery.extend(gnSettings,window.gn_data.Settings);var MAX_DATE_TIME_TICKS="3155378975999999999";function SwitchLanguage(e){var t,n=jQuery('form:has(div:first[role!="dialog"])')[0];null==n||"get"==n.method.toLowerCase()?(t=GetLangUrl(window.location.href,e),window.location.href=t):(jQuery(n).append('<input type="hidden" name="langSwitch" value="true" />'),t=GetLangUrl(n.action,e),n.action=t,n.submit())}function GetLangUrl(e,t){var n=GetArgsFromUrl(e);return null==n.lang&&n.push("lang"),n.lang=t,GetUrlFromArgs(e,n)}function GetCurrentLang(){var e=GetCookie("lang");return null==e?"en":e}function GetArgsFromUrl(e){var t,n=[],r=e.indexOf("?")+1;if(0<r)for(var a=e.slice(r).split("&"),o=0;o<a.length;o++){t=a[o].split("=");var i=decodeURIComponent(t[0]),u=decodeURIComponent(t[1]);n.push(i),n[i]=u}return n}function GetUrlFromArgs(e,t){var n=-1==e.indexOf("?")?e:e.substring(0,e.indexOf("?"));if(-1!=e.indexOf("#")&&(n=n.substring(0,n.indexOf("#"))),0==t.length)return n;n+="?";for(var r=0;r<t.length;r++){var a=t[r],o=t[a];0<r&&(n+="&"),n+=encodeURIComponent(a),null!=o&&(n+="="+encodeURIComponent(o))}return n}function GetTimeZoneName(){var e=(new Date).toString();return/(.())\((.*)\)(.*)/g.exec(e)[3]}function GetTimeZoneOffsetMinutes(){return(new Date).getTimezoneOffset()}function GetDateStringFromTicks(e){if("0"==e||null==e)return"";var t=new BigNumber(e);return moment(parseInt(t.subtract(621355968e9).divide(1e4).valueOf())).format("LLL")}function GetTicksFromDate(e){return new BigNumber(e.getTime()?e.getTime():0).multiply(1e4).add(621355968e9).valueOf()}function GetDateFromTicks(e){var t=new BigNumber(e);return moment.utc(parseInt(t.subtract(621355968e9).divide(1e4).valueOf())).toDate()}function GetAgeStringFromTicks(e){if("0"==e)return"";var t=new BigNumber(e),n=moment(parseInt(t.subtract(621355968e9).divide(1e4).valueOf())),r=moment.duration(moment()-n);return 30<r.asDays()?n.format("l"):1<r.asDays()?Math.floor(r.asDays())+"d":1<r.asHours()?Math.floor(r.asHours())+"h":1<r.asMinutes()?Math.floor(r.asMinutes())+"min":(r.asSeconds()<0?0:Math.floor(r.asSeconds()))+"s"}function GetAgeString(e,t,n,r){var a=new BigNumber(e),o=new BigNumber(t);return GetAgeStringFromSecond(moment.duration(parseInt(o.subtract(a).divide(1e4).valueOf())).asSeconds(),n,r)}function GetAgeStringFromSecond(e,t,n){var r=Math.floor(e/3600),a=Math.floor(e%3600/60),o=Math.floor(e%3600%60);return 0==r&&0==a?(t?"+":"")+Math.floor(e)+"s":(t?"+":"")+(r<10?"0":"")+r+":"+(a<10?"0":"")+a+(n?":"+(o<10?"0":"")+o:"")}function GetLoginNameFromUniqueKey(e){return e?e.split("_")[0]:null}function GetTicksFromUniqueKey(e){if(e){var t=e.split("_")[1];if(t&&0<t.length)return new BigNumber(MAX_DATE_TIME_TICKS).subtract(t).valueOf()}return"0"}function GetUniqueKey(e,t){if(null==t)return e+"_"+t;var n=new BigNumber(MAX_DATE_TIME_TICKS),r=new BigNumber("string"==typeof t?t:GetTicksFromDate(t));return e+"_"+n.subtract(r).valueOf()}function SetCookieDays(e,t,n){SetCookieMinutes(e,t,24*n*60)}function SetCookieMinutes(e,t,n){var r=new Date;r.setTime(r.getTime()+60*n*1e3);var a="expires="+r.toUTCString();document.cookie=e+"="+t+";path=/;"+a}function GetCookie(e){var t=("; "+document.cookie).split("; "+e+"=");if(2==t.length)return t.pop().split(";").shift()}function GetLangRes(e,t){return window.language&&window.language[e]?window.language[e]:(console&&console.log('Missing language-key: "'+e+'":"'+t+'"'),t)}function AddLangRes(e,t){window.language||(window.language=[]),window.language[e]=t}function GetGoogleMapsLink(e,t){var n=numeral(e).format("0.00000[00000]"),r=numeral(t).format("0.00000[00000]");return IsGeoValid(e,t)?"http://maps.google.com/?q="+n+","+r:"javascript:;"}function GetStaticMapUrl(e,t){var n=numeral(e).format("0.00000[00000]"),r=numeral(t).format("0.00000[00000]");return IsGeoValid(e,t)?"http://staticmap.openstreetmap.de/staticmap.php?center="+n+","+r+"&zoom=13&size=100x100&maptype=osma&markers="+n+","+r+",red-pushpin":"/Content/Mashup/Images/EmptyMap.png"}function IsGeoValid(e,t){return null!=e&&null!=t&&!(0===e&&0===t)}function GetDistanceString(e){if(e){var t=e.DistanceMetersObfuscated,n=e.DistanceMetersExact;if(0<t)return ObfuscatedDistanceStringByNumber(t);if(0<=n)return FormatExactDistance(n)}return""}function ObfuscatedDistanceStringByNumber(e){switch(e){case 150:return"<150m";case 250:return"<250m";case 500:return"<500m";case 1e3:return"<1km";case 5e3:return"<5km";case 1e4:return"<10km";case 25e3:return"<25km";case 5e4:return"<50km";case 1e5:return"<100km";case 1e6:return">100km";case 1e7:return">1000km"}return FormatExactDistance(e)}function FormatExactDistance(e){return e<0?"0m":e<1e3?e.toFixed(0)+"m":+(e/1e3).toFixed(1)+"km"}function FormatSpeed(e){return(10<e?Math.floor(e):+e.toFixed(1))+"km/h"}function IsValidDomain(e,t){return/^[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/.test(e)&&e.length<=t}function IsValidUrl(e,t,n){return n?(n=n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),new RegExp("https?://"+n+"([-a-zA-Z0-9@:%_+.~#?&//=]*)").test(e)&&e.length<=t):/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)/.test(e)&&e.length<=t}function IsValidCommunity(e,t){return/^[a-z0-9\-]+$/.test(e)&&e.length<=t}function ShowPreviewPageLoad(e){e?jQuery("body").addClass("preview-page-load"):jQuery("body").removeClass("preview-page-load")}function ImageErrorHandler(e,t){var n=jQuery(e),r=n.data("lazy-img");r&&""!=r?(setTimeout(function(){n.attr("src",r)},500),n.data("lazy-img",""),n.attr("onerror",'ImageErrorHandler(this, "'+t+'")')):(n.data("lazy-img",null),n.attr("onerror",null)),n.attr("src",t)}function MasonryStart(){jQuery().masonry&&jQuery(".grid").masonry({itemSelector:".grid-item",columnWidth:".grid-sizer",percentPosition:!0})}function MasonryReload(){jQuery().masonry&&jQuery.each(jQuery(".grid"),function(e,t){jQuery.data(jQuery(t),"masonry")||MasonryStart(),jQuery(t).masonry("reloadItems"),jQuery(t).masonry("layout")})}window.jQuery&&(jQuery("body").on("click","[data-popup]",function(e){var t=jQuery(this).attr("href");t||(t=jQuery(this).data("src")),t&&!jQuery(this).attr("disabled")&&(null!=window.MA_GPSNOSE_IS_MASHUP&&window.MA_GPSNOSE_IS_MASHUP?window.open(t,"_blank"):window.location.href=t),e.preventDefault()}),jQuery("body").on("click","[data-external]",function(e){var t=jQuery(this).attr("href");t||(t=jQuery(this).data("src")),t&&!jQuery(this).attr("disabled")&&window.open(t,"_blank"),e.preventDefault()}),jQuery(document).ready(function(){jQuery("[data-remove]").remove()}),jQuery(document).ajaxComplete(function(){jQuery("[data-remove]").remove()}),jQuery.fn.popover&&jQuery(document).popover({selector:"[data-popover-img]",trigger:"focus",html:!0,placement:"auto",content:function(){return'<img class="ma-popover-image" src="'+jQuery(this).data("popover-img")+'" />'+(jQuery(this).data("popover-text")?'<p class="text-center">'+jQuery(this).data("popover-text")+"</p>":"")}}));